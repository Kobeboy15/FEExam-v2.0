{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kobeboy\\\\Desktop\\\\FE_EXAM(CLEANUP)\\\\frontend\\\\components\\\\register.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport Link from 'next/link';\nimport { useState, useContext } from 'react';\nimport { useRouter } from 'next/router';\nimport { useMutation } from '@apollo/react-hooks';\nimport { REGISTER_USER, AUTHENTICATE_USER } from '../repositories/users';\nimport UserContext from './UserContext';\nimport styles from './Register.module.css';\n\nfunction Register() {\n  const router = useRouter();\n  const {\n    setLogin\n  } = useContext(UserContext);\n  const {\n    0: error,\n    1: setError\n  } = useState({});\n  const {\n    0: values,\n    1: setValues\n  } = useState({\n    email: '',\n    password: '',\n    confirmPassword: ''\n  });\n\n  const onChange = event => {\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      [event.target.name]: event.target.value\n    }));\n  };\n\n  const [authenticateUser, {\n    loadingWait\n  }] = useMutation(AUTHENTICATE_USER, {\n    update(_, result) {\n      localStorage.setItem('token', result.data.authenticate);\n      setLogin(true);\n      router.push('/');\n    },\n\n    onError(err) {\n      console.log(err);\n    },\n\n    variables: {\n      email: values.email,\n      password: values.password\n    }\n  });\n  const [addUser, {\n    loading\n  }] = useMutation(REGISTER_USER, {\n    update(_, result) {\n      authenticateUser();\n    },\n\n    onError(err) {\n      setError(err.graphQLErrors[0].extensions.exception.errors);\n    },\n\n    variables: {\n      email: values.email,\n      password: values.password\n    }\n  });\n\n  const onSubmit = event => {\n    event.preventDefault();\n    var password = document.getElementById(\"password\");\n    var confirm_password = document.getElementById(\"confirm_password\");\n\n    if (values.password != values.confirmPassword) {\n      confirm_password.setCustomValidity(\"Passwords Don't Match\");\n    } else {\n      confirm_password.setCustomValidity(\"\");\n      console.log(\"PASSWORDS MATCH\");\n    } //addUser();\n\n  };\n\n  return __jsx(\"div\", {\n    className: styles.register__container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: styles.container__content,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: styles.content__title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, __jsx(\"h2\", {\n    className: styles.title__text,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, \"Register\")), __jsx(\"form\", {\n    onSubmit: onSubmit,\n    className: styles.content__input,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: styles.input__login,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  }, __jsx(\"p\", {\n    className: styles.login__text,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, \"Email\"), __jsx(\"input\", {\n    type: \"email\",\n    name: \"email\",\n    className: styles.login__textbox,\n    value: values.email,\n    onChange: onChange,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  })), __jsx(\"div\", {\n    className: styles.input__login,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }, __jsx(\"p\", {\n    className: styles.login__text,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, \"Password\"), __jsx(\"input\", {\n    id: \"password\",\n    type: \"password\",\n    name: \"password\",\n    className: styles.login__textbox,\n    value: values.password,\n    onChange: onChange,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  })), __jsx(\"div\", {\n    className: styles.input__login,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, __jsx(\"p\", {\n    className: styles.login__text,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, \"Confirm Password\"), __jsx(\"input\", {\n    id: \"confirm_password\",\n    type: \"password\",\n    name: \"confirmPassword\",\n    className: styles.login__textbox,\n    value: values.confirmPassword,\n    onChange: onChange,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  })), __jsx(\"button\", {\n    type: \"submit\",\n    className: styles.input__button,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }\n  }, \"Register\"), __jsx(\"p\", {\n    className: styles.input__register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 11\n    }\n  }, \"Already have an account?\", __jsx(Link, {\n    href: \"/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }, __jsx(\"a\", {\n    className: styles.register__link,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 15\n    }\n  }, \"Login Here\"))))));\n}\n\nexport default Register;","map":{"version":3,"sources":["C:/Users/Kobeboy/Desktop/FE_EXAM(CLEANUP)/frontend/components/register.js"],"names":["Link","useState","useContext","useRouter","useMutation","REGISTER_USER","AUTHENTICATE_USER","UserContext","styles","Register","router","setLogin","error","setError","values","setValues","email","password","confirmPassword","onChange","event","target","name","value","authenticateUser","loadingWait","update","_","result","localStorage","setItem","data","authenticate","push","onError","err","console","log","variables","addUser","loading","graphQLErrors","extensions","exception","errors","onSubmit","preventDefault","document","getElementById","confirm_password","setCustomValidity","register__container","container__content","content__title","title__text","content__input","input__login","login__text","login__textbox","input__button","input__register","register__link"],"mappings":"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","sourcesContent":["import Link from 'next/link'\r\nimport { useState, useContext } from 'react'\r\nimport { useRouter } from 'next/router'\r\nimport { useMutation } from '@apollo/react-hooks'\r\nimport { REGISTER_USER, AUTHENTICATE_USER } from '../repositories/users'\r\nimport UserContext from './UserContext'\r\nimport styles from './Register.module.css'\r\n\r\n\r\n\r\nfunction Register() {\r\n  const router = useRouter();\r\n  const { setLogin } = useContext(UserContext);\r\n\r\n  const [error, setError] = useState({});\r\n  const [values, setValues] = useState({\r\n    email: '',\r\n    password: '',\r\n    confirmPassword: ''\r\n  })\r\n\r\n  const onChange = (event) => {\r\n    setValues({...values, [event.target.name]: event.target.value});\r\n  }\r\n\r\n  const [authenticateUser, { loadingWait }] = useMutation(AUTHENTICATE_USER, {\r\n    update(_, result){\r\n      localStorage.setItem('token', result.data.authenticate);\r\n      setLogin(true);\r\n      router.push('/');\r\n    },\r\n    onError(err){\r\n      console.log(err);\r\n    },\r\n    variables: {\r\n      email: values.email,\r\n      password: values.password\r\n    }\r\n  })\r\n\r\n  const [addUser, { loading }] = useMutation(REGISTER_USER, {\r\n    update(_, result){\r\n      authenticateUser();\r\n    },\r\n    onError(err){\r\n      setError(err.graphQLErrors[0].extensions.exception.errors);\r\n    },\r\n    variables: {\r\n      email: values.email,\r\n      password: values.password\r\n    }\r\n  })\r\n\r\n  const onSubmit = (event) => {\r\n    event.preventDefault();\r\n    var password = document.getElementById(\"password\");\r\n    var confirm_password = document.getElementById(\"confirm_password\");\r\n    if(values.password != values.confirmPassword){\r\n      confirm_password.setCustomValidity(\"Passwords Don't Match\");\r\n    } else {\r\n      confirm_password.setCustomValidity(\"\")\r\n      console.log(\"PASSWORDS MATCH\");\r\n    }\r\n    //addUser();\r\n  }\r\n\r\n  return (\r\n    <div className={styles.register__container}>\r\n      <div className={styles.container__content}>\r\n        <div className={styles.content__title}>\r\n          <h2 className={styles.title__text}>Register</h2>\r\n        </div>\r\n        <form\r\n          onSubmit={onSubmit} \r\n          className={styles.content__input}\r\n        >\r\n          <div className={styles.input__login}>\r\n            <p className={styles.login__text}>Email</p>\r\n            <input \r\n              type=\"email\"\r\n              name=\"email\"\r\n              className={styles.login__textbox}\r\n              value={values.email}\r\n              onChange={onChange}\r\n              required\r\n            />\r\n          </div>\r\n          <div className={styles.input__login}>\r\n            <p className={styles.login__text}>Password</p>\r\n            <input \r\n              id=\"password\"\r\n              type=\"password\" \r\n              name=\"password\"\r\n              className={styles.login__textbox}\r\n              value={values.password}\r\n              onChange={onChange}\r\n              required\r\n            />\r\n          </div>\r\n          <div className={styles.input__login}>\r\n            <p className={styles.login__text}>Confirm Password</p>\r\n            <input\r\n              id=\"confirm_password\"\r\n              type=\"password\"\r\n              name=\"confirmPassword\" \r\n              className={styles.login__textbox}\r\n              value={values.confirmPassword}\r\n              onChange={onChange}\r\n              required\r\n            />\r\n          </div>\r\n          <button\r\n            type=\"submit\"\r\n            className={styles.input__button}\r\n          >\r\n            Register\r\n          </button>\r\n          <p className={styles.input__register}>\r\n            Already have an account?\r\n            <Link href=\"/login\">\r\n              <a className={styles.register__link}>Login Here</a>\r\n            </Link>\r\n          </p>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Register;\r\n"]},"metadata":{},"sourceType":"module"}